###############################################################################
# Project Configuration
cmake_minimum_required(VERSION 3.14)


###############################################################################
# Language Configuration
set(CMAKE_CXX_STANDARD 17)



###############################################################################
# Set includes directories
set(
        SERVER_INCLUDES
        include
        Server
)

include_directories(${SERVER_INCLUDES} ${BABEL_COMMON_INCLUDE})



###############################################################################
# Set Compile Options
add_compile_options(-Wall -Wextra)
add_definitions("-fPIC")

if (USE_LOG)
    set(USE_DEBUG ON)
    add_compile_definitions(_BABEL_LOG_)
endif (USE_LOG)

if (USE_DEBUG)
    add_compile_options(-g3)
    add_compile_definitions(_DEBUG_)
else(USE_DEBUG)
    add_compile_options(-Werror)
endif (USE_DEBUG)



###############################################################################
# Conan Build Management
include(${CMAKE_BINARY_DIR}/conanbuildinfo.cmake)
conan_basic_setup()

find_package(Qt5Widgets CONFIG REQUIRED)

include_directories(${CMAKE_INCLUDE_PATH})



###############################################################################
# Source files
set(SERVER_SRC_DIR src)

set(
        SERVER_SOURCE_FILES
        Server/Server.cpp
)


foreach (src ${SERVER_SOURCE_FILES})
    set(SERVER_SOURCES ${SERVER_SOURCES} ${SERVER_SRC_DIR}/${src})
endforeach (src)


# Sources for Tests
set(G_SERVER_SOURCE ${SERVER_SOURCE} PARENT_SCOPE)

# Includes for Tests
set(G_SERVER_INCLUDES ${SERVER_INCLUDES} PARENT_SCOPE)



###############################################################################
# Change Binary output path
#set(EXECUTABLE_OUTPUT_PATH ..)



###############################################################################
# Server Executable

add_executable(
        babel_server
        test.cpp
#        main.cpp
#        ${SERVER_SOURCES}
)

target_link_libraries(babel_server ${CONAN_LIBS} Qt5::Widgets)
